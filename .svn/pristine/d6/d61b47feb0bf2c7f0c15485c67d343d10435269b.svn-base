<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport"
          content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>衣服详情页头部</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/2_0/aui_2_0.css"/>
    <link rel="stylesheet" type="text/css" href="../css/2_0/rem.css"/>
    <link rel="stylesheet" type="text/css" href="../css/2_0/util.css"/>
    <link rel="stylesheet" type="text/css" href="../css/fonts/duola_iconfont2.css"/>
    <link rel="stylesheet" type="text/css" href="../css/2_0/aui_slide.css"/>
    <link rel="stylesheet" type="text/css" href="../css/swiper.min.css"/>
    <style>
        /*调整轮播样式开始*/
        .aui-slide-page-dot {
            background-color: rgba(255, 255, 255, 0.0);
            border-radius: 50%;
            border: 0.1px solid #FFFFFF;
        }
        .aui-slide-page-active {
            opacity: 1;
            background-color: #FFFFFF !important;
        }
        /*调整轮播样式结束*/
        #UIScrollPicture {
            height: 28.1rem;
            position: relative;
        }

        /*分享按钮*/
        #shared-btn {
            width: 2.5rem;
            height: 2.5rem;
            line-height: 2.5rem;
            border-radius: 100%;
            position: absolute;
            bottom: -1rem;
            right: 0.5rem;
            background: #FFFFFF;
            box-shadow: 0px 2px 4px 0px rgba(188, 188, 188, 0.50);
            font-size: 0.7rem;
            text-align: center;
            z-index: 9999;
        }

        #clothe-title {
            width: 80%;
            margin-left: 1rem;
            margin-top: 0.75rem;
            margin-bottom: 1.02rem;
            height: 1rem;
            line-height: 1rem;
            font-family: SourceHanSansCN-Regular;
            font-size: 1rem;
            color: #000000;
            background: #FFFFFF;
        }

        section {
            margin: 3.1rem 0.5rem 0 0.5rem;
        }

        section .title {
            font-family: SourceHanSansCN-Light;
            font-size: 1rem;
            color: #464646;
        }




        /*商品信息*/
        #clothes-info-container {
            margin-bottom: 0.5rem;
            font-family: SourceHanSansCN-Light;
            font-size: 0.7rem;
            color: #A6A6A6;
        }

        #clothes-info-container .item {
            height: 2.2rem;
            line-height: 2.2rem;
            font-weight: 100;
            color: #464646;
            position: relative;
        }

        #clothes-info-container .item-left {
            font-family: SourceHanSansCN-Normal;
            font-size: 0.7rem;
            color: #4A4A4A;
            line-height: 2.3rem;
            height: 2.2rem;
            text-align: left;
            position: absolute;
            top: 0rem;
            left: 1rem;
            padding-top: 1px;
        }
        #clothes-info-container .item-right {
            font-family: SourceHanSansCN-Normal;
            font-size: 0.7rem;
            color: #4A4A4A;
            line-height: 2.3rem;
            height: 2.2rem;
            text-align: left;
            position: absolute;
            top: 0rem;
            right: 1rem;
            max-width: 13rem
        }



        /*底部按钮*/
        #clotheset-add-btn {
            width: 60%;
            float: left;
            height: 2.8rem;
            line-height: 2.8rem;
            /*background: #FF6100;*/
            background: #FFFFFF;
            color: #FFFFFF;
            font-family: SourceHanSansCN-Normal;
            font-size: 0.8rem;
            text-align: center;
            -webkit-transition: background 0.1s;
            transition: background 0.1s;
        }
        #go-my-clotheset {
            width: 40%;
            float: left;
            height: 2.8rem;
            line-height: 2.8rem;
            font-family: SourceHanSansCN-Normal;
            font-size: 0.8rem;
            color: #646464;
            text-align: center;
        }
        #clothe-img-container img {
            margin-bottom: 0.5rem;
        }




        /*评论区域*/
        #comment-container {
            margin: 0;
            padding: 0;
        }

        #comment-container .title {
            font-family: SourceHanSansCN-Normal;
            font-size: 0.8rem;
            color: #000000;
            height:0.8rem;
            line-height: 0.8rem;
            margin-top: 1rem;
            padding-left: 1rem;
            margin-bottom: 1.7rem;
        }

        #comment-container .line-1 {
            height: 1px;
            background-color: #F6F6F6;
        }

        .comment-item {
            margin-left: 0.65rem;
            margin-right: 0.9rem;
            padding: 0;
        }

        .comment-item .avatar {
            width: 2.5rem;
            height: 2.5rem;
            display: block;
            border-radius: 100%;
            margin-right: 0.55rem;
        }

        .comment-item .comment-header {
            height: 1.3rem;
        }

        .comment-item .comment-header .name {
            font-family: SourceHanSansCN-Bold;
            font-size: 0.6rem;
            color: #969696;
            width: 8rem;
            padding: 0rem;
            margin-right: 0.5rem;
            height: 1.2rem;
            line-height: 1.2rem;
            position: relative;
        }

        .comment-item .comment-header .time {
            font-family: SourceHanSansCN-Normal;
            font-size: 0.6rem;
            color: #969696;
            width: 3rem;
            height: 0.9rem;
            text-align: left;
            padding: 0rem;
            height: 1.2rem;
            line-height: 1.2rem;
            position: absolute;
            left: 4.5rem;
            top: 0rem;
        }

        .comment-item .comment-header .icon-Stars {
            font-size: 0.5rem;
            margin: 0 0.15rem;
        }

        .comment-item .comment-text {
            padding: 0.1rem 0;
            font-family: SourceHanSansCN-Normal;
            font-size: 0.7rem;
            color: #464646;
            line-height: 1rem;
        }

        .comment-item .get-more {
            position: absolute;
            right: 0;
            bottom: -0.1rem;
            background-color: #FFFFFF;
            font-family: SourceHanSansCN-Normal;
            font-size: 0.6rem;
            color: #BBBBBB;
            padding-right: 0.3rem;
            padding-left: 0.6rem;
        }

        .comment-more {
            font-family: SourceHanSansCN-Normal;
            font-size: 0.7rem;
            color: #A6A6A6;
            border: 1px solid #C8C8C8;
            border-radius: 2px;
            width: 7.5rem;
            height: 1.8rem;
            line-height: 1.8rem;
            text-align: center;
            margin: 0 auto;
        }

        .comment-item .comment-img {
            padding: 0.4rem 0;
            height: 2rem;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .comment-item .comment-img img {
            width: 2rem;
            min-height: 2rem;
            margin: 0 0.2rem;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            -webkit-transform: translateY(-50%);
        }

        .comment-item .comment-img img:last-child {
            margin-right: 0;
        }

        .comment-item .comment-img img:first-child {
            margin-left: 0;
        }

        .hack-reply-bg{
            background-color: #F6F6F6;
            padding: 0.4rem 0.25rem;
        }
        .hack-reply-more{
            background-color: #F6F6F6;
            border-radius: 1px;
            /*padding: 0.4rem 0.25rem;*/
        }
        .hack-reply-more .reply-text{
            font-family: SourceHanSansCN-Regular;
            font-size: 0.7rem;
            color: #464646;
            line-height: 1rem;
        }
        .hack-reply-more .reply-more {
            position: absolute;
            right: 0;
            bottom: 0;
            background-color: #FFFFFF;
            font-family: SourceHanSansCN-Normal;
            font-size: 0.6rem;
            color: #BBBBBB;
            padding-right: 0.3rem;
            padding-left: 0.6rem;
        }
        /*推荐搭配样式clothes-with-containerP*/
        #clothes-with-containerP{
            margin: 0;
            padding: 0;
        }
        #clothes-with-containerP .item {
            width: 6.5rem;
            height: 13.2rem;
            background: #FFFFFF;
            margin-left: 0.2rem;
            margin-right: 0.2rem;
        }

        #clothes-with-containerP .item:last-child {
            margin-right: 0;
        }

        #clothes-with-containerP .item .imgBox {
            width: 100%;
            height: 9.75rem;
            overflow: hidden;
        }

        #clothes-with-containerP .item .imgBox img {
            width: 100%;
        }

        #clothes-with-containerP .item .discrible {
            width: 100%;
            height: 2.75rem;
            text-align: center;
            /*box-shadow: 0 0.1rem 0.1rem 0 rgba(227, 227, 227, 0.50);*/
        }

        #clothes-with-containerP .item .discrible .name {
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding-top: 0.5rem;
            font-family: SourceHanSansCN-Normal;
            font-size: 0.5rem;
            color: #4A4A4A;
        }

        #clothes-with-containerP .item .discrible .size {
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-top: 0.4rem;
            font-family: Arial-BoldMT;
            font-size: 0.6rem;
            color: #4A4A4A;
            line-height: 0.6rem;
        }

        #clothes-with-containerP .item .discrible .size span {
            margin: 0 0.25rem;
        }

        /*推荐同款样式*/
        .swiper-container {
            padding-top: 0rem;
            padding-left: 0.8rem;
            /*padding-right: 0.8rem;*/
        }

        #clothes-similar-container .item {
            width: 6.5rem;
            height: 12.6rem;
            background: #FFFFFF;

            margin-right: 0.75rem;
        }

        #clothes-similar-container .item:last-child {
            margin-right: 0;
        }

        #clothes-similar-container .item .imgBox {
            width: 100%;
            height: 9.75rem;
            overflow: hidden;
        }

        #clothes-similar-container .item .imgBox img {
            width: 100%;
        }

        #clothes-similar-container .item .discrible {
            width: 100%;
            height: 2.75rem;
            text-align: center;
            box-shadow: 0px 2px 2px 0px rgba(227, 227, 227, 0.50);
        }

        #clothes-similar-container .item .discrible .name {
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding-top: 0.5rem;
            font-family: SourceHanSansCN-Normal;
            font-size: 0.5rem;
            color: #4A4A4A;
        }

        #clothes-similar-container .item .discrible .size {
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-top: 0.4rem;
            font-family: Arial-BoldMT;
            font-size: 0.6rem;
            color: #4A4A4A;
            line-height: 0.6rem;
        }

        #clothes-similar-container .item .discrible .size span {
            margin: 0 0.25rem;
        }
        .shadow-l{
            background-color: #ECECEC;
            height: 0.5rem;
        }
        .shadow-s{
            background-color: #ECECEC;
            height: 1px;
        }
        .title{
            width: 100%;
            /*height: 4.6rem;*/
        }
        .font01{
            font-family: SourceHanSansCN-Normal;
            font-size: 0.7rem;
            color: #000000;
            display: inline;
            margin-bottom: 1rem;

        }
        .font01-cost{
            margin-left: 1rem;
        }
        .font01-like{
            margin-left: 2.25rem;
        }
        .font01-comment{
            margin-left: 2.55rem;
        }
        .icon-style{
            width: 2.1rem;
            height:2.1rem;
            line-height: 2.1rem;
            text-align: center;
            margin: 0 auto;
            margin-bottom: 0.5rem;
            border-radius: 50%;
            background-color: #FF3C54;
            color: #FFFFFF;
        }
        .icons-footer-text{
            text-align: center;
            font-family: SourceHanSansCN-Normal;
            font-size: 0.6rem;
            color: #000000;
        }
        /*尺码*/
        .clothe-size-container {
            /*height: 6.55rem;*/
            position: relative;
        }
        .clothe-size-title{
            font-family: SourceHanSansCN-Normal;
            font-size: 0.8rem;
            color: #000000;
            margin-top: 1.15rem;
            margin-left: 1rem;
        }
        .clothe-size-row{
            margin-top: 0.4rem;
            margin-left: 1rem;
        }
        .clothe-size-icon-style-normal{
            width: 2.1rem;
            height:2.1rem;
            border-radius: 50%;
            line-height: 2.1rem;
            background-color: #4A4A4A;
            text-align: center;
            margin-bottom: 0.7rem;
            color: #FFFFFF;
        }
        .clothe-size-icon-style-no-stock{
            width: 2.1rem;
            height:2.1rem;
            border-radius: 50%;
            line-height: 2.1rem;
            background-color: #F1F1F1;
            text-align: center;
            margin-bottom: 0.7rem;
            color: #FFFFFF;
        }
        .clothe-size-icon-style-chiose{
            width: 2.1rem;
            height:2.1rem;
            border-radius: 50%;
            line-height: 2.1rem;
            background-color: #FF3C54;
            text-align: center;
            margin-bottom: 0.7rem;
            color: #FFFFFF;
        }
        .clothe-size-text{
            margin-top: 0.3rem;
            font-family: SourceHanSansCN-Normal;
            font-size: 0.5rem;
            color: #000000;
            width: 2.1rem;
            height: 0.5rem;
            line-height: 0.5rem;
            text-align: center;
            margin-bottom: 0.7rem;

        }
        .clothe-size-table{
            font-family: SourceHanSansCN-Normal;
            font-size: 0.7rem;
            color: #313131;
            height: 0.8rem;
            line-height: 0.8rem;
            margin-right: 1rem;
        }

        .model-container{
            /*height: 7.65rem;*/
        }
        .model-container-title{
            font-family: SourceHanSansCN-Normal;
            font-size: 0.8rem;
            color: #000000;
            margin-top: 1.15rem;
            margin-left: 1rem;
            margin-bottom: 0.4rem;
        }
        .model-container-text{
            font-family: SourceHanSansCN-Normal;
            font-size: 0.6rem;
            color: #4A4A4A;
            text-align: center;
            height: 1.65rem;
            line-height: 1.65rem;
        }
        .model-container-text2{
            font-family: SourceHanSansCN-Normal;
            font-size: 0.7rem;
            color: #4A4A4A;
            text-align: center;
            height: 1.65rem;
            line-height: 1.65rem;
        }
        .brand-container{

        }
        .brand-name{
            font-family: SourceHanSansCN-Normal;
            font-size: 0.7rem;
            color: #000000;
            margin-left: 1rem;
            position: relative;
        }
        .brand-info{
            margin-left: 1rem;
            margin-right: 1rem;
            margin-top: 1rem;
            margin-bottom:1rem;
            font-family: SourceHanSansCN-Light;
            font-size: 0.7rem;
            color: #7E7E7E;
            letter-spacing: -0.21px;
            line-height: 26px;
        }

		.guess-you-like-header{
			margin-right: 1rem;
		}
		.guess-you-like-header .more{
        	padding:0.3rem 0;
        	font-family:ArialMT;
        	font-size:0.55rem;
        	color:#A6A6A6;
        	text-align:right;
        }
        .guess-you-like-header .more span{
        	font-size:0.35rem;
        	margin-left:0.1rem;
        }
    </style>
</head>
<body>
<div id="UIScrollPicture">
    <div class="aui-slide-wrap" id="UIScrollPictureContainer">
    </div>
    <div class="aui-slide-page-wrap"><!--分页容器--></div>
    <div id="shared-btn" tapmode onclick="execOpenSharedMask()" style="display: none">
        <span class="nav-right-icon duola-iconfont icon-share" tapmode onclick="execOpenSharedMask()"></span>
    </div>

</div>

<div class="title">
    <div id="clothe-title"  name="sizeTitle">
        <!--中性OL行政上衣-->
    </div>
    <div class="aui-row hide" style="margin-left: 1rem; margin-right: 1rem">
        <div class="aui-col-xs-5">
            <div class="font01"><i class="duola-iconfont icon-zfb-money"></i>市场价:￥599</div>
        </div>
        <div class="aui-col-xs-4">
            <div class="font01"><i class="duola-iconfont icon-zfb-money"></i>喜欢329</div>
        </div>
        <div class="aui-col-xs-3" style="text-align: center">
            <div class="font01"><i class="duola-iconfont icon-zfb-money"></i>评论35</div>
        </div>
    </div>

</div>
<div class="shadow-s"></div>
<div class="aui-row" style=" height: 5.5rem;text-align: center;padding: 1rem 1rem;">
    <div class="aui-col-xs-3">
        <div class="icon-style">
            <i class="duola-iconfont icon-tuxing "></i>
        </div>

        <div class="aui-grid-label icons-footer-text">24小时发货</div>
    </div>
    <div class="aui-col-xs-3">
        <div class="icon-style" style="background-color:  #EE5BEB;">
            <i class="duola-iconfont icon-icon-test-copy" ></i>
        </div>

        <div class="aui-grid-label icons-footer-text">无限穿衣</div>
    </div>
    <div class="aui-col-xs-3">
        <div class="icon-style" style="background-color:  #32ABFF;">
            <i class="duola-iconfont icon-icon-test1" ></i>
        </div>
        <div class="aui-grid-label icons-footer-text">服装免洗</div>
    </div>
    <div class="aui-col-xs-3">
        <div class="icon-style" style="background-color:  #1ED3B8;">
            <i class="duola-iconfont icon-icon-test2" ></i>
        </div>
        <div class="aui-grid-label icons-footer-text">往返包邮</div>
    </div>

</div>
<div class="shadow-l"></div>
<div class="clothe-size-container" id="clothe-size-container">

</div>
<div class="shadow-l"></div>
<div class="model-container hide">
    <div class="model-container-title">模特信息</div>
    <div style="border: 1px solid #9B9B9B;margin: 0 1rem"></div>
    <div class="aui-row" style="background: #F8F8F8; margin: 0 1rem">
        <div class="aui-col-xs-2 model-container-text">
            试穿尺码
        </div>
        <div class="aui-col-xs-2 model-container-text">
            身高
        </div>
        <div class="aui-col-xs-2 model-container-text">
            体重
        </div>
        <div class="aui-col-xs-2 model-container-text">
            胸围
        </div>
        <div class="aui-col-xs-2 model-container-text">
            腰围
        </div>
        <div class="aui-col-xs-2 model-container-text">
            臀围
        </div>
    </div>
    <div style="border: 1px solid #EDEDED;margin: 0 1rem"></div>
    <div class="aui-row" style="background: #FFFFFF; margin: 0 1rem; margin-bottom: 1.25rem">
        <div class="aui-col-xs-2 model-container-text2">
            M
        </div>
        <div class="aui-col-xs-2 model-container-text2">
            172CM
        </div>
        <div class="aui-col-xs-2 model-container-text2">
            49KG
        </div>
        <div class="aui-col-xs-2 model-container-text2">
            80CM
        </div>
        <div class="aui-col-xs-2 model-container-text2">
            59CM
        </div>
        <div class="aui-col-xs-2 model-container-text2">
            86CM
        </div>
    </div>
    <div class="shadow-l"></div>
</div>

<div id="brand-container" class="brand-container">

</div>

<div id="clothes-with-containerP">
</div>

<div>
    <div class="model-container-title">衣服信息</div>
    <div id="clothes-info-container">
        <!--<div class="item">-->
        <!--<span>服装编码</span>&nbsp;&nbsp;&nbsp;&nbsp;1524908-->
        <!--</div>-->
        <!--<div class="item">-->
        <!--<span>颜色</span>&nbsp;&nbsp;&nbsp;&nbsp;黑色-->
        <!--</div>-->
        <!--<div class="item">-->
        <!--<span>风格</span>&nbsp;&nbsp;&nbsp;&nbsp;欧美、度假-->
        <!--</div>-->
        <!--<div class="item">-->
        <!--<span>推荐场合</span>&nbsp;&nbsp;&nbsp;&nbsp;度假-->
        <!--</div>-->
        <!--<div class="item">-->
        <!--<span>服装版型</span>&nbsp;&nbsp;&nbsp;&nbsp;雪纺-->
        <!--</div>-->
        <!--<div class="item">-->
        <!--<span>面料成分</span>&nbsp;&nbsp;&nbsp;&nbsp;薄-->
        <!--</div>-->
        <!--<div class="item">-->
        <!--<span>图案</span>&nbsp;&nbsp;&nbsp;&nbsp;直身裙-->
        <!--</div>-->
    </div>
</div>
<div class="shadow-l"></div>
<div id="comment-container"></div>
<div class="shadow-l"></div>
<div class="guess-you-like-container" id="guess-you-like-container">

</div>
<div class="footer-hack"></div>
<footer id="footer" class="duola-footer">
    <div id="go-my-clotheset" tapmode onclick="goMyClose()">
        查看衣橱
    </div>
    <a id="clotheset-add-btn" tapmode onclick="addMyCloset(this)" style="display: block">已下架</a>
</footer>

<!--轮播图模板-->
<script id="shufflingFigure-container-template" type="text/x-dot-template">
    {{ for(var i = 0; i < it.count; i++) { }}
    <div class="aui-slide-node bg-dark">
        <img onload="cacheImgNew(this,'img')" class="opacity0 transition-opacity"
             onclick="{{=getExecScript('showModelImg',[i,it.list.map(function(value){return value.img;}).toString()])}}"
             src="{{= 'http://img.duolayimeng.com/original/' + it.list[i].img + '@640w_10q' }}"
             data-url="{{= 'http://img.duolayimeng.com/original/' + it.list[i].img + '@!Detail' }}" width="100%"/>
    </div>
    {{ } }}
</script>

<!--选择尺码模板-->
<script id="chooseSize-container-template" type="text/x-dot-template">
    <div class="clothe-size-title">选择尺码<span class="aui-pull-right clothe-size-table" onclick="showSizeTable()">尺码对照表<i class="duola-iconfont icon-jiantou"></i></span></div>
    <div class="aui-row clothe-size-row">
        {{for(var i = 0, len = it.count; i < len; i++){}}
        <div class="aui-col-xs-2">
            {{?(it.list[i].stock == 0)}}
            <div data-size="{{=it.list[i].size}}" class="clothe-size-icon-style-no-stock"  onclick="chooseActiveSize(this, {{=it.list[i].stock}})">{{=it.list[i].size}}</div>
            <!--<div class="aui-grid-label clothe-size-text">无货</div>-->
            {{?}}
            {{?(it.list[i].stock != 0)}}
            <div data-size="{{=it.list[i].size}}" class="clothe-size-icon-style-normal"  onclick="chooseActiveSize(this, {{=it.list[i].stock}})">{{=it.list[i].size}}</div>
            {{?(it.list[i].stock == 1)}}
            <div class="aui-grid-label clothe-size-text">剩1件</div>
            {{?}}
            {{?}}


        </div>
        {{}}}
    </div>

</script>

<!--品牌模板-->
<script id="brand-container-template" type="text/x-dot-template">
    <div class="model-container-title">品牌信息</div>
    <div class="brand-name" tapmode onclick="{{=getExecScript('goBrandDetail',[it._id,escape(it.name)])}}">
        {{=it.brandType || '独立设计品牌'}}|{{=it.name}}
        <i class="duola-iconfont icon-jiantou hide" style="width: 0.55rem; height: 0.55rem; line-height: 0.55rem;position: absolute;right: 1rem; top: 0.2rem"></i>
    </div>
    <div class="brand-info">
        <!--拉夏贝尔本意在法文中译为小教堂，是法国一条风情小街，创始人在构思这个品牌时正居住在这条充满法国文化的小街上，在浪漫温馨而又充满激情的岁月里诞生了拉夏贝尔服饰，并将这唯美风情延续至今。-->
    </div>
    <div class="shadow-l"></div>
    <!--<section>-->
    <!--<div class="title">品牌信息</div>-->
    <!--<div class="brand-desc flex flex-bottom flex-space-between" tapmode-->
    <!--onclick="{{=getExecScript('goBrandDetail',[it._id,escape(it.name)])}}">-->
    <!--<div class="brand-desc-text flex-1 word-wrap">{{=it.brandType || '独立设计品牌'}}&nbsp;&nbsp;<span class="duola-iconfont icon-line"></span>&nbsp;&nbsp;{{=it.name}}</div>-->
    <!--<div class="brand-desc-more">查看品牌<span class="duola-iconfont icon-right"></span></div>-->
    <!--</div>-->
    <!--</section>-->
</script>

<!--尺码对照表模板-->
<script id="sizeControl-container-template" type="text/x-dot-template">

    <tr class="theader">
        {{? it.count == 0 }}
        <td style="text-align: left">暂无</td>
        {{??}}
        <td>尺码</td>
        {{?}}
        {{~it.name:value:index}}
        <td>{{=value}}</td>
        {{~}}
    </tr>
    {{ for(var i = 0; i < it.count; i++) { }}
    <tr>
        <td>{{=it.list[i].size}}</td>
        {{~it.list[i].values:value:index}}
        <td>{{=value }}</td>
        {{~}}
    </tr>
    {{ } }}
</script>

<!--推荐搭配模板-->
<script id="clothingWith-container-template" type="text/x-dot-template">
    {{? it.count>0 }}
    <div class="model-container-title">推荐搭配</div>
    <div class="swiper-container">
        <div class="swiper-wrapper">
            {{ for(var i = 0; i < it.count; i++) { }}
            <div class="swiper-slide item">
                <div class="imgBox">
                    <img onload="cacheImgNew(this,'img')" class="opacity0 transition-opacity"
                         src="{{= getImgUrl(colthPath, it.list[i].img, CONSTANT.PICTUREOSS.CLOTHESLISTQ5) }}"
                         data-url="{{=getImgUrl(colthPath, it.list[i].img, CONSTANT.PICTUREOSS.CLOTHESLIST)}}"
                         tapmode onclick="{{=getExecScript('showClothes2',[it.list[i]._id,null,frameData.from.winName])}}"/>
                </div>
                <div class="discrible">
                    <div class="name">{{=it.list[i].title}}</div>
                    <div class="size">
                        {{~it.list[i].size:value:index}}
                        <span>{{=value=='J'?'均码':value}}</span>
                        {{~}}
                    </div>
                </div>
            </div>
            {{ } }}
        </div>
    </div>
    <div class="shadow-l"></div>
    {{?}}
</script>



<!--衣服信息模板-->
<script id="clothingInformation-container-template" type="text/x-dot-template">
    {{ for(var i = 0; i < it.count; i++) { }}
    <div class="item {{?i >4}}hide{{?}}">


        <div style="background: #F0F0F0;height: 1px; width: auto; margin-left: 1rem; margin-right: 1rem"></div>

        <div class="item-left">{{=it.list[i].name}}</div> <div class="item-right aui-ellipsis-1">{{=it.list[i].value}}</div>
    </div>
    {{ } }}
    <div style="background: #F0F0F0;height: 1px; width: auto; margin-left: 1rem; margin-right: 1rem"></div>
    <!--<div style="border: 1px solid #EDEDED; margin-left: 1rem; margin-right: 1rem"></div>-->
    <div style="height: 4.8rem;padding-top: 1.5rem">
        <div id="moreInfoSwitch" onclick="showMoreInfo()" style="width: 7.5rem; height: 1.8rem; margin: 0 auto;line-height: 1.8rem;text-align: center;border: 1px solid #C8C8C8;border-radius: 2px;">
            查看更多相关信息
        </div>
    </div>
</script>

<!--评论模板-->
<script id="comment-container-template" type="text/x-dot-template">

    <div class="title">精选评论</div>
    {{ for(var i = 0; i < it.list.length; i++) { }}
    <div class="comment-item flex">
        <img onload="cacheImgNew(this,'img','local')" src="../image/avatar.png"
             class="avatar opacity0 transition-opacity" data-url="{{=getAvatar(it.list[i].avatar,it.list[i].avatarFrom)}}">
        <div class="flex-1" style="min-height: 4rem">
            <div class="comment-header flex flex-space-between flex-bottom">
                <span class="name"><span class="aui-ellipsis-1" style="width: 4rem;">{{=subStr(it.list[i].nickname,10)}} </span><span class="time">{{=it.list[i].time}}</span></span>
                <span>{{~new Array(it.list[i].rate):value:index}}<span class="duola-iconfont icon-Stars hit-color"></span>{{~}}</span>

            </div>
            <div style="background: #F0F0F0;height: 1px;width: auto"></div>
            <div class="hack-get-more" style="max-height: 5rem;position: relative;overflow: hidden; margin-bottom: 1rem">
                <div class="comment-text">
                    {{!it.list[i].content}}
                </div>
                <span class="get-more aui-hide" tapmode onclick="getMoreComent(this)">查看更多</span>
            </div>
            {{? it.list[i].photos && it.list[i].photos.count}}
            <div class="comment-img">
                {{~it.list[i].photos.list:value:index}}
                <img tapmode onclick="{{=getExecScript('goShowImg',[index,it.list[i].photos.list.map(function(value){return value.url;}).toString(),it.list[i].userId])}}"
                     onload="cacheImgNew(this,'img')" class="opacity0 transition-opacity"
                     src="{{=[CONSTANT.PICPRE.RES,it.list[i].userId,CONSTANT.PICPRE.COMMENT,value.url,'@90w_5q'].join('')}}"
                     data-url="{{=[CONSTANT.PICPRE.RES,it.list[i].userId,CONSTANT.PICPRE.COMMENT,value.url,CONSTANT.PICTUREOSS.COMMENTIMG].join('')}}"/>
                {{~}}
            </div>
            {{?}}
            {{? it.list[i].replys && it.list[i].replys.length>0}}
            <div class="hack-reply-bg">
                <div class="hack-reply-more" style="max-height: 5rem;position: relative;overflow: hidden;">
                    <div class="reply-text">多啦衣梦：{{=it.list[i].replys[0].content}}</div>
                    <span class="reply-more aui-hide" tapmode onclick="getMoreReply(this)">查看更多</span>
                </div>
            </div>
            {{?}}
        </div>
    </div>
    <!--<div class="line-1"></div>-->
    {{ } }}
    </div>
    {{? it.total > 2}}
    <div style="width: 100%; height: 3.15rem;margin-top: 2.4rem">
        <div class="comment-more"  tapmode onclick="goCommentList()">查看全部{{=it.total}}条评论</div>
    </div>
    {{?}}
</script>
<script id="guess-you-like-container-template" type="text/x-dot-template">
    <div class="model-container-title guess-you-like-header flex flex-space-between flex-vertical-center">
    	<div>猜你喜欢<i class="duola-iconfont icon-follow" style="color: #FF3C54;margin-left:0.2rem;"></i></div>
    	<div class="more flex flex-vertical-center" tapmode="" data-page={{=it.guessYouLike.page}} onclick="getNextGuessYouLike(this)">换一批<span class="duola-iconfont icon-right"></span></div>
    </div>
    <div class="aui-row" style="margin-left: 0.5rem; margin-right: 0.5rem; ">
        {{for(var i = 0, len = it.guessYouLike.count; i < len; i++){}}
        <div class="aui-col-xs-4" style="margin-bottom: 1rem" tapmode
             onclick="{{=getExecScript('showClothesLocal',[it.guessYouLike.list[i]._id,it.trace_id,frameData.from.winName])}}">
            <div style="width: 5rem; margin: 0 auto">
                <img src="{{=getImgUrl(colthPath, it.guessYouLike.list[i].img, CONSTANT.PICTUREOSS.CLOTHESLIST)}}" style="width: 5rem; height: 7.5rem;">
                <div class="aui-ellipsis-1" style="font-family: SourceHanSansCN-Medium;font-size: 12px;color: #313131;letter-spacing: 0px;">
                    {{=it.guessYouLike.list[i].title}}
                    <!--<span>XL</span>-->
                    <!--<span class="aui-pull-right" style="margin-right: 0rem">-->
                    <!--<i class="duola-iconfont icon-follow " style="color: #C8C8C8;"></i>-->
                    <!--<span>16533</span>-->
                    <!--</span>-->
                </div>
            </div>
        </div>
        {{ } }}


    </div>
    <div class="shadow-l"></div>
</script>
</body>

<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/uz.js"></script>
<script type="text/javascript" src="../script/url.js"></script>
<script type="text/javascript" src="../script/aui_slide.js"></script>
<script type="text/javascript" src="../script/swiper.min.js"></script>
<script type="text/javascript" src="../script/doT_min.js"></script>
<script type="text/javascript" src="../script/umeng_sdk.js"></script>
<script type="text/javascript" src="../script/log_sdk.js"></script>
<script type="text/javascript">
    var sharedBtnEl = null;
    var UIScrollPictureHeight = null;
    var headerHeight = null;
    var id;
    var preSoldBefore = null;
    var clothesName = '';
    var shareUrlPath = null;
    var frameData;
    var sizeTableData;
    //查看大图
    function showClothesLocal(id, trace_id, winName) {
        showClothes2(id, null, winName);
        setGuessYouLikeLog(id, trace_id);
    }
    //写入日志
    function setGuessYouLikeLog(id, trace_id) {
        console.log("setGuessYouLikeLog id == "+id);
        console.log("setGuessYouLikeLog trace_id == "+trace_id);
        if(id == 0){
            toastMsg('无效服装ID');
            return;
        }
        if(!isDefine(trace_id)){
            toastMsg('无效服装ID');
            return;
        }
        var url = serviceNew + 'behaviour';
        var headers = _getAjaxHeaders(true, false);

        var data = {
            body:{
                bhv_type: 'click',
                item_id: id.toString(),
                trace_id: trace_id.toString()
            }
        };
        var extra = {};
        _ajaxData(url, 'post', headers, data, function (ret, extra) {
            console.log("setGuessYouLikeLog  ret == "+JSON.stringify(ret))
        }, function (err, extra) {
            console.log("setGuessYouLikeLog  err == "+JSON.stringify(err))
        }, 0, extra);
    }
    function showModelImg(index, path) {
        if (!isDefine(path)) {
            return;
        }
        path = path.split(',');
        path = path.map(function (value) {
            return 'http://img.duolayimeng.com/original/' + value + '@!Detail';

        });
        var name = 'showImg';
        var title = '查看图片';
        var params = {
            path: path,
            headerHeight: frameData.headerHeight,
            currIndex: index
        };
        var from = {
            winName: api.winName,
            frameName: api.frameName
        };
        var url = 'showImg_new.html';
        openNewWin(name, title, params, from, url, {
            type: "fade",                //动画类型（详见动画类型常量）
            duration: 300                //动画过渡时间，默认300毫秒
        });
    }
    //    跳转尺码对照表
    function showSizeTable() {
        var name = 'size_compare';
        var title = '尺码对照表';
        var leftIcon = 'duola-iconfont icon-left';
        var leftCallback = 'execCloseSlefWin';
        var leftNav = setNavData(leftIcon, null, leftCallback);
        var border = false;
        var params = {};
        params.nav = setNav(leftNav, border);
        params.frame = {'data': {'sizeTableData': sizeTableData}};
        var from = {
            winName: api.winName,
            frameName: api.frameName
        };
        var url = 'header_new.html';
        var animation = {
            type: "push",                //动画类型（详见动画类型常量）
            subType: "from_right",       //动画子类型（详见动画子类型常量）
            duration: 300                //动画过渡时间，默认300毫秒
        };
        var page = 'size_compare.html';
        openNewWinFrame(name, title, params, from, url, animation, page);
    }
    function execCloseSlefWin(extra, winName, value) {
        api.closeWin({
            name: winName
        });
        vm.getData("vip");
        vm.messages();
    }
    function initGuessYouLike(action) {
        var url = serviceNew + 'guessULike/detail';
        var headers;
        if (isLogin()){
            headers = _getAjaxHeaders(true, false);
        }else {
            headers = _getAjaxHeaders(false, false);
        }

        var data = {
            body:{
                page: 1,
                pageSize: 6,
                item_id: id.toString()
            }
        };
        var extra = {action: action};
        _ajaxData(url, 'post', headers, data, initGuessYouLikeSuccessCallback, initGuessYouLikeErrorCallback, 0, extra);
    }
    function initGuessYouLikeSuccessCallback(ret, extra) {
        console.log("initGuessYouLikeSuccessCallback ret == "+JSON.stringify(ret))
        var action = extra.action;
        if (action == CONSTANT.ACTIONREFRESH) {
            pullRefreshDone();
        } else {
            loadingHide();
        }
        if (ret.statusCode == 200) {
            var html = doTHtml('guess-you-like-container-template', ret);
            var guessYouLikeContainer = $api.byId('guess-you-like-container');
            guessYouLikeContainer.innerHTML = html;
        } else {
            toastMsg(ret.msg);
        }
    }

    function initGuessYouLikeErrorCallback(err, extra) {
        var action = extra.action;
        if (action == CONSTANT.ACTIONREFRESH) {
            pullRefreshDone();
        } else {
            loadingHide();
        }
        toastMsg(err.msg);
    }

	function getNextGuessYouLike(target){	// 猜你喜欢》》换一批
		if(target.getAttribute("data-clicked")==="clicked"){	//防止用户在一次请求还未结束时点击多次
			return
		}else{
			target.setAttribute("data-clicked","clicked");
		}
		var url = serviceNew + "guessULike/detail",
			page = Number(target.getAttribute("data-page")) || 2,  //从第2页开始
			pageSize = 6,
			data = {
				page: page,
				pageSize: pageSize,
                item_id: id.toString()
			},
			headers = null,
			extra = {
				page:page,
				target:target
			};
		
		
		
		if (isLogin()){
            headers = _getAjaxHeaders(true, false);
        }else {
            headers = _getAjaxHeaders(false, false);
        }
        data = _getAjaxData(data);
        _ajaxData(url, "post", headers, data, getNextGuessYouLikeSuccessCallback, getNextGuessYouLikeErrorCallback, 0, extra);
	}
	
	function getNextGuessYouLikeSuccessCallback(ret, extra){
		var target = extra.target;
		if(ret.statusCode == 200 && ret.guessYouLike.count && ret.guessYouLike.count == 6){  //新的猜测数量需要大于0
			ret.guessYouLike.page = extra.page+1;
			var html = doTHtml('guess-you-like-container-template', ret),
				guessYouLikeContainer = $api.byId("guess-you-like-container");
			guessYouLikeContainer.innerHTML = html;
		}else if(ret.statusCode == 200){
            console.log("extra.page == "+extra.page)
            if (extra.page == 2){
                return;
            }
            target.setAttribute("data-page",1);
            target.removeAttribute("data-clicked");
            getNextGuessYouLike(target);
		}else{
			toastMsg(ret.msg);
			target.removeAttribute("data-clicked");
		}
	}
	
	function getNextGuessYouLikeErrorCallback(err, extra){
		toastMsg(err.msg);
		var target = extra.target;
		target.removeAttribute("data-clicked");
	}


    //跳转我的衣橱页面
    function goMyClose() {
        if (!isLogin()) {
            goLogin();
            return;
        }
        /*@刘鹏宇新增start*/
        var name = "closet_header",
            title = "我的衣橱",
            params = {},
            from = {
                winName:api.winName,
                frameName:api.frameName
            },
            url = "./closet/closet_header.html",
            animation = null,
            page = "./closet.html",
            umengPage = null;
        openNewWinFrame(name, title, params, from, url, animation, page, umengPage);
        return;
        /*新增end*/
        api.closeToWin({
            name: 'root'
        });
        api.execScript({
            name: 'root',
            script: 'execGoCloudset()'
        });

    }
    function showMoreInfo(){
        var doms = $api.domAll($api.byId('clothes-info-container'),'.hide');
        if (doms.length  == 0){
            var doms2 = $api.domAll($api.byId('clothes-info-container'),'.item');
            for (var i = 4, len = doms2.length; i < len; i++)
            {
                $api.addCls(doms2[i], 'hide')
            }
            var moreInfoSwitch = $api.byId('moreInfoSwitch');
            moreInfoSwitch.innerText = '查看更多相关信息';
            return;
        }
        for (var i = 0, len = doms.length; i < len; i++)
        {
            $api.removeCls(doms[i], 'hide')
        }
        var moreInfoSwitch = $api.byId('moreInfoSwitch');
        moreInfoSwitch.innerText = '收起部分相关信息';
    }

    //点击返回图标异步执行关闭窗口
    function execCloseSlefWin(extra, winName, value) {
        api.closeWin({
            name: winName
        });
    }

    apiready = function () {
        UIScrollPictureHeight = api.winWidth * 1.5;
        sharedBtnEl = $api.byId('shared-btn');
        var data = api.pageParam.data;
        id = data.id ? data.id : 0;
//        console.log("id ============ "+id);
//        id = 1515035;

//        preSoldBefore = data.preSoldBefore ? data.preSoldBefore : null;
        headerHeight = api.getPrefs({
                sync: true,
                key: 'headerHeight'
            }) || 50;

        var rect = {
            x: 0,
            y: 0,
            w: 'auto',
            h: headerHeight
        };
        var name = 'showInfo_new';
        var page = 'showInfo_new.html';
        frameData = api.pageParam.data;
        api.openFrame({
            name: name,
            url: page,
            rect: rect,
            bounces: false,
            softInputMode: 'resize',
            pageParam: {
                data: frameData
            },
            bgColor: 'rgba(0,0,0,0)',
            vScrollBarEnabled: false,
            hScrollBarEnabled: false
        });
//			openNewFrame(name,page,false,rect,frameData);
        isInstalledWx(function (isIntalled, extra) {
            if (isIntalled) {
                showWexin();
                listenScroll();
            }
        });
        api.parseTapmode();
        onPageUmeng(CONSTANT.PAGE.CLOTHDETAIL);
        init();
        initClothingWith();
    };

    function initSuccessCallback(ret, extra) {
        loadingHide();
        if (ret.statusCode == '200') {

            var clothesetAddBtnEl = $api.byId('clotheset-add-btn');
            clothesName = ret.name ? ret.name : '';
            _setHtmlVal('clothe-title', clothesName);
            if(isTrue(ret.grounding)){
                $api.css(clothesetAddBtnEl,'background:#FF3C54');
                $api.text(clothesetAddBtnEl,'加入衣橱');
            }else{
                $api.css(clothesetAddBtnEl,'background:#DEDEDE');
            }
            if (ret.img) {
                shareUrlPath = getImgUrl(colthPath, ret.img.list[0].img, CONSTANT.PICTUREOSS.SHARE);
                tempIdHtml('shufflingFigure-container-template', ret.img, 'UIScrollPictureContainer');
                getScrollPicture();
            }

            if (ret.brand) {
                ret.brand.brandType = ret.brandType;
                tempIdHtml('brand-container-template', ret.brand, 'brand-container');
                sendEventUmeng(CONSTANT.UMENGEVENT.CLOTH_DETAIL, {from: '独立设计'});
            } else {
                sendEventUmeng(CONSTANT.UMENGEVENT.CLOTH_DETAIL, {from: isDefine(preSoldBefore) ? '预选' : '云衣橱'});
            }
            if (ret.comments && ret.comments.total) {
                tempIdHtml('comment-container-template', ret.comments, 'comment-container');
//                _imgCacheUrl3($api.byId('comment-container'));
            }

            if (ret.stock){
                var stock = ret.stock;
                var stockArray = ['J', 'XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL'];
                var sizes = [];
                for (var i = 0, len = stockArray.length; i< len; i++){
                    for (var j = 0, len2 = stock.count; j< len2; j++){
                        if (stockArray[i] == stock.list[j].size){
                            var item;
                            if (stockArray[i] == 'J' || stockArray[i] == 'j'){
                                item = { "stock": stock.list[j].stock, "size": "均码"};

                            }else {
                                item = { "stock": stock.list[j].stock, "size": stock.list[j].size};
                            }
                            sizes.push(item)
                        }
                    }
                }
                stock.list = sizes;

                tempIdHtml('chooseSize-container-template', stock, 'clothe-size-container');
            }
            if (ret.sizes) {
                sizeTableData = ret.sizes;
            }
            if (ret.details) {
                tempIdHtml('clothingInformation-container-template', ret.details, 'clothes-info-container');
            }

            var commentTextEls = $api.domAll($api.byId('comment-container'), '.comment-text');
            for (var i = 0; i < commentTextEls.length; i++) {
                var tempElHeight = parseInt($api.cssVal(commentTextEls[i], 'height'));
                if (parseInt(tempElHeight) > parseInt($api.cssVal($api.dom('html'), 'font-size')) * 5) {
                    $api.removeCls(commentTextEls[i].nextElementSibling, 'aui-hide');
                }
            }
            var replyTextEls = $api.domAll($api.byId('comment-container'), '.reply-text');
            for (var i = 0; i < replyTextEls.length; i++) {
                var replyElHeight = parseInt($api.cssVal(replyTextEls[i], 'height'));
                if (parseInt(replyElHeight) > parseInt($api.cssVal($api.dom('html'), 'font-size')) * 5) {
                    $api.removeCls(replyTextEls[i].nextElementSibling, 'aui-hide');
                }
            }
            api.parseTapmode();
            setLogClick(extra.id);
        } else if (ret.msg) {
            toastMsg(ret.msg);
        }
    }
    function initErrorCallback(err, extra) {
        loadingHide();
        if (err.msg) {
            toastMsg(err.msg);
        }
    }
    function init() {
        loadingShow();
        var url = serviceNew + 'cloth/detail/' + id;
        var headers = _getAjaxHeaders(false, true);
        var data = _getAjaxData({
            viewComment: 'YES',
            viewTryReports: 'YES',
            comSize: 2
        });
        var extra = {id: id};
        _ajaxData(url, 'post', headers, data, initSuccessCallback, initErrorCallback, 0, extra);
        initGuessYouLike();
    }

    //加载推荐搭配数据
    function initClothingWith() {
        var url = serviceNew + 'cloth/matches/' + id;
        var headers = _getAjaxHeaders(false, true);
        var data = _getAjaxData({
            pageSize: 10
        });
        var extra = null;
        _ajaxData(url, 'post', headers, data, initClothingWithSuccessCallback, initClothingWithErrorCallback, 0, extra);
    }
    function initClothingWithSuccessCallback(ret, extra) {
        if (ret.statusCode == 200) {
            getClothingWithHtml(ret);
        } else {
            toastMsg(ret.msg);
        }
    }

    function initClothingWithErrorCallback(err, extra) {
        if (err.msg) {
            toastMsg(err.msg);
        }
    }

    function getClothingWithHtml(ret) {
        var html = doTHtml('clothingWith-container-template', ret);
        var cloudsetSimilarContainer = $api.byId('clothes-with-containerP');
        cloudsetSimilarContainer.innerHTML = '';
        $api.append(cloudsetSimilarContainer, html);
//        _imgCacheUrl3(cloudsetSimilarContainer);
        var swiper = new Swiper('.swiper-container', {
            slidesPerView: 'auto',
            freeMode: true,
            speed: 100,
            resistanceRatio: 0.5
        });
        api.parseTapmode();
    }

    function sendSimilarUmeng(){
        sendEventUmeng(CONSTANT.UMENGEVENT.SIMILAR_BTN);
    }
    //    testSimilar();
    function testSimilar() {
        var testData = {
            "count": 6,
            "statusCode": 200,
            "msg": "OK",
            "list": [{
                "img": "1531857-1.jpg",
                "_id": "1531857",
                "size": ["L", "XL", "S"],
                "name": "双排扣毛呢外套"
            }, {
                "img": "1534894-1.jpg",
                "_id": "1534894",
                "size": ["均码"],
                "name": "新款韩版立领双面羊绒大衣"
            }, {
                "img": "1534890-1.jpg",
                "_id": "1534890",
                "size": ["L"],
                "name": "新款韩版大翻领双面羊绒大衣"
            }, {
                "img": "1534886-1.jpg",
                "_id": "1534886",
                "size": ["均码"],
                "name": "新款韩版翻领双面羊绒大衣"
            }, {
                "img": "1557925-1.jpg",
                "_id": "1557925",
                "size": ["L", "M", "XL"],
                "name": "新款翻领休闲羊绒大衣"
            }, {"img": "1557928-1.jpg", "_id": "1557928", "size": ["L", "M", "XL", "S"], "name": "韩版大翻领休闲百搭羊绒大衣"}]
        };
        getSimilarHtml(testData);
    }

    //显示更多评论
    function getMoreComent(el) {
        var commentTextEl = $api.closest(el, '.hack-get-more');
        $api.css(commentTextEl, 'max-height:none;');
        $api.addCls(el, 'aui-hide');
    }
    //显示更多回复
    function getMoreReply(el) {
        var commentTextEl = $api.closest(el, '.hack-reply-more');
        $api.css(commentTextEl, 'max-height:none;');
        $api.addCls(el, 'aui-hide');
    }


    //testHtml();
    function testHtml() {
//			var ret = {"sizes":{"count":1,"list":[{"values":["88","76","66","32"],"size":"均码"}],"name":["长度","胸围","腰围","肩宽"]},"statusCode":200,"matches":{"count":0,"list":[]},"stock":{"count":1,"list":[{"stock":6,"size":"J"}]},"details":{"count":12,"list":[{"value":"1557763","name":"服装编码"},{"value":"麻花中长款毛衣","name":"款式"},{"value":"蓝","name":"颜色"},{"value":["潮牌","休闲","百搭","性感"],"name":"风格"},{"value":"日常","name":"推荐场合"},{"value":"合体","name":"服装版型"},{"value":"混纺","name":"面料成分"},{"value":"适中","name":"厚度"},{"value":"常规袖","name":"袖型"},{"value":"长袖","name":"袖长"},{"value":"纯色","name":"图案"},{"value":"麻花中长款毛衣","name":"服装描述"}]},"name":"麻花中长款毛衣","img":{"count":6,"list":[{"img":"1557763-1.jpg"},{"img":"1557763-2.jpg"},{"img":"1557763-3.jpg"},{"img":"1557763-4.jpg"},{"img":"1557763-5.jpg"},{"img":"1557763-6.jpg"}]},"brand":{"_id":"sg4TS87cBuzp6kxuH","name":"ROOLEN"},"msg":"OK","comments":{"total":0,"list":[]},"tryReports":[{"value":[],"name":"试穿人"},{"value":[],"name":"身高"},{"value":[],"name":"体重"},{"value":[],"name":"肩宽"},{"value":[],"name":"胸围"},{"value":[],"name":"腰围"},{"value":[],"name":"臀围"},{"value":[],"name":"日常尺码"},{"value":[],"name":"试穿尺码"},{"value":[],"name":"试穿结果"},{"_id":"photo","value":[],"name":"试穿图片"}]};
//			var ret = {"statusCode":200,"msg":"OK","name":"小高领蝴蝶结装饰长款外套","brand":{"_id":"YKi8dtnKGfWja2txf","name":"SHOW·魅"},"img":{"count":7,"list":[{"img":"1528136-1.jpg"},{"img":"1528136-2.jpg"},{"img":"1528136-3.jpg"},{"img":"1528136-4.jpg"},{"img":"1528136-5.jpg"},{"img":"1528136-6.jpg"},{"img":"1528136-7.jpg"}]},"matches":{"count":0,"list":[]},"stock":{"count":1,"list":[{"size":"M","stock":0}]},"sizes":{"count":1,"name":["长度","胸围","腰围","肩宽"],"list":[{"size":"M","values":["100","82","70","37"]}]},"details":{"count":13,"list":[{"name":"服装编码","value":"1528136"},{"name":"款式","value":"小高领蝴蝶结装饰长款外套"},{"name":"颜色","value":"白色"},{"name":"风格","value":["甜美","简约","优雅"]},{"name":"推荐场合","value":"日常"},{"name":"服装版型","value":"合体"},{"name":"面料成分","value":"化纤"},{"name":"厚度","value":"适中"},{"name":"领型","value":"高领"},{"name":"袖型","value":"常规袖"},{"name":"袖长","value":"长袖"},{"name":"图案","value":"纯色"},{"name":"服装描述","value":"小高领蝴蝶结装饰长款外套"}]}};
//			var ret = {"sizes":{"count":3,"list":[{"values":["62","84","36"],"size":"XS"},{"values":["63","86","37"],"size":"S"},{"values":["64","88","38"],"size":"M"}],"name":["长度","胸围","肩宽"]},"statusCode":200,"matches":{"count":0,"list":[]},"stock":{"count":3,"list":[{"stock":0,"size":"XS"},{"stock":0,"size":"S"},{"stock":0,"size":"M"}]},"details":{"count":14,"list":[{"value":"1521863","name":"服装编码"},{"value":"大牌简约经典双排扣修身显瘦黑色西装","name":"款式"},{"value":"黑色","name":"颜色"},{"value":["OL风"],"name":"风格"},{"value":"通勤","name":"推荐场合"},{"value":"宽松","name":"服装版型"},{"value":"化纤","name":"面料成分"},{"value":"薄","name":"厚度"},{"value":"西装领","name":"领型"},{"value":"常规袖","name":"袖型"},{"value":"长袖","name":"袖长"},{"value":"H型","name":"廓形"},{"value":"纯色","name":"图案"},{"value":"经典的黑色西装，衣柜必备的百搭单品。面料挺括，立体裁剪的垂感西装更加大部分的姑娘穿，可以正式可以随意，上班可以搭配白衬衫，平时逛街可以搭配裙装，非常实用。","name":"服装描述"}]},"name":"大牌简约经典双排扣修身显瘦黑色西装","img":{"count":5,"list":[{"img":"1521863-1.jpg"},{"img":"1521863-2.jpg"},{"img":"1521863-3.jpg"},{"img":"1521863-4.jpg"},{"img":"1521863-5.jpg"}]},"brand":null,"msg":"OK","comments":{"total":6,"list":[{"photos":{"count":0,"list":[]},"content":"123","time":"17小时前","rate":3,"_id":"L9mPuiQqLeKvRkr2Q","nickname":"tigertigertigertigertigertigertigertigertigertiger","userId":"BGHk2vdxTFzZoGwtq","isWxAvatar":"NO","avatar":"BGHk2vdxTFzZoGwtq/avatar/mad6qaoj"},{"photos":{"count":0,"list":[]},"content":"@#","time":"18小时前","rate":4,"_id":"65WmxFt8iwEQiwY6K","nickname":"tigertigertigertigertigertigertigertigertigertiger","userId":"BGHk2vdxTFzZoGwtq","isWxAvatar":"NO","avatar":"BGHk2vdxTFzZoGwtq/avatar/mad6qaoj"}]}};
//			var ret = {"sizes":{"count":4,"list":[{"values":["87","96","66","39"],"size":"S"},{"values":["88","100","68","40"],"size":"M"},{"values":["89","104","70","41"],"size":"L"},{"values":["86","92","64","38",""],"size":"XS"}],"name":["长度","胸围","腰围","肩宽"]},"statusCode":200,"matches":{"count":0,"list":[]},"stock":{"count":5,"list":[{"stock":15,"size":"S"},{"stock":7,"size":"M"},{"stock":8,"size":"L"},{"stock":1,"size":"XS"},{"stock":0,"size":"XL"}]},"details":{"count":15,"list":[{"value":"1512832","name":"服装编码"},{"value":"条纹衬衫连衣裙","name":"款式"},{"value":"蓝色","name":"颜色"},{"value":["休闲","日韩"],"name":"风格"},{"value":"日常","name":"推荐场合"},{"value":"修身","name":"服装版型"},{"value":"棉棉60% 聚酯纤维40%","name":"面料成分"},{"value":"适中","name":"厚度"},{"value":"立领","name":"领型"},{"value":"常规袖","name":"袖型"},{"value":"长袖","name":"袖长"},{"value":"A型裙","name":"裙型"},{"value":"及膝裙","name":"裙长"},{"value":"条纹","name":"图案"},{"value":"条纹衬衫 时尚韩版高腰修身裙","name":"服装描述"}]},"name":"条纹衬衫连衣裙","img":{"count":6,"list":[{"img":"1512832-1.jpg"},{"img":"1512832-2.jpg"},{"img":"1512832-3.jpg"},{"img":"1512832-4.jpg"},{"img":"1512832-5.jpg"},{"img":"1512832-6.jpg"}]},"brand":null,"msg":"OK","comments":{"total":10,"list":[{"photos":{"count":0,"list":[]},"content":"和图片一样噢","time":"昨天","rate":4,"_id":"wn2ZEWzbCXobwsrpR","nickname":"多啦用户#361249","userId":"su5gyg4ZvbfZWPpXj","isWxAvatar":"NO","avatar":null},{"photos":{"count":0,"list":[]},"content":"就是腰那里有点开","time":"10-09","rate":2,"_id":"3w25fZpo6LEinDzrn","nickname":"晶","userId":"n2tmWPhf2paaDdswJ","isWxAvatar":"YES","avatar":"http://wx.qlogo.cn/mmopen/VeRicCwuWpPDNsKlU3lL3ic7Z3gjNWHyAtmKtYxy4RB5QK5IS9pbcxsvMHLJIpMTRWMJQRia6soYa1RFtInr5TyFfJDYfo4BVQM/0"}]}};
//			tempIdHtml('comment-container-template',ret.comments,'comment-container');
//			if(ret.brand){
//				tempIdHtml('brand-container-template',ret.brand,'brand-container');
//			}
//			if(ret.tryReports && ret.tryReports.length>0 && ret.tryReports[0].value.length>0){
//				tempIdHtml('model-container-template',ret.tryReports,'model');
//			}
//			if(ret.matches){
//				tempIdHtml('clothingWith-container-template',ret.matches,'clothes-with-container');
//			}
//
//			tempIdHtml('shufflingFigure-container-template',ret.img,'UIScrollPictureContainer');
//			getScrollPicture();
//			tempIdHtml('chooseSize-container-template',ret.stock,'clothe-size-container');
//			tempIdHtml('sizeControl-container-template',ret.sizes,'clothe-size-table');
//			tempIdHtml('clothingInformation-container-template',ret.details,'clothes-info-container');
//			tempIdHtml('modelShows-container-template',ret.img,'modelShowsContainer');
    }
    function tempIdHtml(tempId, data, containerId) {
        var html = doTHtml(tempId, data);
        var containerEl = $api.byId(containerId);
        if (containerEl) {
            containerEl.innerHTML = html;
        }
    }
    //采用aui-slide轮播
    function getScrollPicture() {
        new auiSlide({
            container: document.getElementById("UIScrollPicture"),
            "height": UIScrollPictureHeight,
            "speed": 500,
            "distance": 20,//触发滑动事件水平距离
//				"autoPlay": 3000, //自动播放
            "loop": true,
            "pageShow": true,
            "pageStyle": 'dot',
            'dotPosition': 'center'
        })
    }

    function listenScroll() {
        var topHeight = UIScrollPictureHeight - headerHeight;
        window.onscroll = function () {
            var yheight = getScrollTop(); //滚动条距顶端的距离
            if (yheight >= topHeight) {
                hideSharedBtn();
            } else {
                showSharedBtn();
            }
        };
    }

    function showSharedBtn() {
        api.execScript({
            frameName: 'showInfo_new',
            script: 'execHideSharedIconEl()'
        });
    }

    function hideSharedBtn() {
        var execScriptFun = getExecScript('execShowSharedIconEl', [clothesName]);
        api.execScript({
            frameName: 'showInfo_new',
            script: execScriptFun
        });
    }

    //点击分享按钮
    function execOpenSharedMask() {
        var scriptFun = getExecScript('openSharedMask', [id]);
        api.execScript({
            frameName: 'showInfo_new',
            script: scriptFun
        });
    }

    //显示微信登录
    function showWexin() {
        var showWexinEl = $api.byId('shared-btn');
        if (showWexinEl) {
            $api.css(showWexinEl, 'display:block');
        }
    }

    function chooseActiveSize(el, stock) {
//        if (stock == 0){
//            return;
//        }
        var chioseedDom = $api.dom('.clothe-size-icon-style-chiose');
        $api.removeCls(chioseedDom, 'clothe-size-icon-style-chiose')
        $api.addCls(chioseedDom, 'clothe-size-icon-style-normal')
        $api.addCls(el, 'clothe-size-icon-style-normal')
        $api.addCls(el, 'clothe-size-icon-style-chiose')

    }

    function chooseNoAaviableSize() {
        toastMsg('暂无库存');
    }

    function execShareWx(index) {
        var scene = '';
        var contentUrl = shareUrl + "detail/" + id;
        //var contentUrl = shareUrl + id;
        if (index == 1) {
            scene = 'session';
        } else if (index == 2) {
            scene = 'timeline';
        }
        shareWx(scene, contentUrl);
        var media_type =  scene === "session"? 'wechat_friend':'wechat_circle';
        setLogShare(id, media_type);
    }
    function shareWx(scene, contentUrl) {
        var wx = api.require('wx');
        if (!isDefine(scene)) {
            return;
        }
        api.download({
            url: shareUrlPath,
            savePath: 'fs://shareImage.png',
            report: true,
            cache: true,
            allowResume: true
        }, function(ret, err) {
            if (ret.state == 1) {
                //下载成功
                wx.shareWebpage({
                    apiKey: CONSTANT.WEIXINAPPKEY,
                    scene: scene,
                    title: '',
                    description: clothesName,
                    thumb: 'fs://shareImage.png',
                    contentUrl: contentUrl,
                }, function (ret, err) {
                    var msg = '未知错误';
                    if (ret.status == true) {
                        msg = '分享成功';
                    } else {
                        if (err.code == -1) {
                            msg = '未知错误';
                        } else if (err.code == 0) {
                            msg = '成功';
                        } else if (err.code == 1) {
                            msg = 'apiKey非法';
                        } else if (err.code == 2) {
                            msg = '你取消了分享';
                        } else if (err.code == 3) {
                            msg = '发送失败';
                        } else if (err.code == 4) {
                            msg = '授权拒绝';
                        } else if (err.code == 5) {
                            msg = '微信服务器返回的不支持错误';
                        } else if (err.code == 6) {
                            msg = '当前设备未安装微信客户端';
                        } else if (err.code == 7) {
                            msg = '注册SDK失败';
                        }
                    }
                    toastMsg(msg);
                });
            } else {

            }
        });

    }

    function addMyCloset(el) {
        if(el.text != '加入衣橱'){
            return;
        }
        var clotheSizeContainer = $api.byId('clothe-size-container');
        var clotheSizeActiveEl = $api.dom(clotheSizeContainer, '.clothe-size-icon-style-chiose');
        if (!clotheSizeActiveEl) {
            $api.byId("clothe-title").scrollIntoView();
            toastMsg('请选择尺码');
        } else {
            if (!isLogin()) {
                goLogin();
                return;
            }
            var size = $api.trimAll(clotheSizeActiveEl.dataset.size);
            if (!isDefine(size)) {
                location.href = '#sizeTitle';
                toastMsg('请选择尺码');
                return;
            } else if (size == '均码') {
                size = 'J';
            }
            addDraBag(size);
        }
    }

    function addDraBag(size) {
        sendMathEventUmeng(CONSTANT.UMENGEVENT.COLLECT_CLOTH, {size: size}, 1);
        loadingShow();
        var url = serviceNew + 'cloth/collect/' + id;
        var headers = _getAjaxHeaders(true, true);
        var data = _getAjaxData({
            "size": size,
            "preSelBefore": isTrue(preSoldBefore) || preSoldBefore == CONSTANT.TEXT.PRESELBEFORE
        });
        var extra = {id: id};
        _ajaxData(url, 'post', headers, data, addDraBagSuccessCallback, addDraBagErrorCallback, 0, extra);
    }

    function addDraBagSuccessCallback(ret, extra) {
        loadingHide();
        if (ret.statusCode == '200') {
            toastMsg("添加成功！");
            setLogCollect(ret.id + '');
        } else if (ret.statusCode == '10104') {
            goLogin();
        } else {
            toastMsg(ret.msg);
        }
    }

    function addDraBagErrorCallback(err, extra) {
        loadingHide();
        toastMsg(err.msg);
    }

    //渲染尺码样式
    function getClotheSizeClass(count, size, stock) {
        if (isTrue(preSoldBefore) || preSoldBefore == CONSTANT.TEXT.PRESELBEFORE) {
            return 'available';
        }
        if (count == 1 && size == 'J' && stock > 0) {
            return 'active';
        } else if (stock > 0) {
            return 'available';
        } else {
            return '';
        }
    }

    //跳转到品牌详情页面
    function goBrandDetail(_id, name) {
        return;
        var from = api.pageParam.data.from;
        var title = name;
        if (from.winName == 'designDetailWin' && from.frameName == 'designDetailFrame') {
            api.closeWin();
//				var execScriptFun = getExecScript('execDetail',[_id,title]);
//				api.execScript({
//					name: from.winName,
//					frameName: from.frameName,
//					script: execScriptFun
//				});
        } else {
            var name = 'designDetail';
            var leftIcon = 'duola-iconfont icon-left';
            var leftNav = setNavData(leftIcon);
            var border = false;
            var bounces = true;
            var params = {};
            params.nav = setNav(leftNav, border);
            params.frame = setFrame(bounces, {
                _id: _id,
                sharedPage: 'http://m.duolayimeng.com/design/' + _id,
                sharedTitle: '原创设计品牌 | ' + name,
                transTitle: true
            });
            var from = {
                winName: api.winName,
                frameName: api.frameName
            };
            var url = 'header_web_trans.html';
            openNewWinFrame(name, title, params, from, url, null, null, '原创设计');
        }
    }

    function goCommentList() {
        var name = 'commentList_new';
        var title = '评价详情';
        var leftIcon = 'duola-iconfont icon-left';
        var leftNav = setNavData(leftIcon);
        var border = true;
        var bounces = true;
        var params = {};
        params.nav = setNav(leftNav, border);
        params.frame = setFrame(bounces, {
            _id: id
        });
        var from = {
            winName: api.winName,
            frameName: api.frameName
        };
        var url = 'header_web.html';
        openNewWinFrame(name, title, params, from, url);
    }

    //拼接头像url
    function getAvatar(avatar, avatarFrom) {
        if (!!avatarFrom) {
            return avatar;
        } else if (avatar && avatar.indexOf('../') == -1) {
            return [CONSTANT.PICPRE.RES, avatar].join('');
        } else {
            return '';
        }
    }

    //查看大图
    function goShowImg(index, path, userId) {
        if (!isDefine(path)) {
            return;
        }
        path = path.split(',');
        path = path.map(function (value) {
            return [CONSTANT.PICPRE.RES, userId, CONSTANT.PICPRE.COMMENT, value, CONSTANT.PICTUREOSS.W960].join('');
        });

        var name = 'showImg';
        var title = '查看图片';
        var params = {
            path: path,
            headerHeight: frameData.headerHeight,
            currIndex: index
        };
        var from = {
            winName: api.winName,
            frameName: api.frameName
        };
        var url = 'showImg_new.html';
        openNewWin(name, title, params, from, url, {
            type: "fade",                //动画类型（详见动画类型常量）
            duration: 300                //动画过渡时间，默认300毫秒
        });
//        openNewWinFrame(name, title, params, from, url);
    }

    function goShowImgTryReport(index,path,userId){
        if(!isDefine(path)){
            return;
        }
        path = path.split(',');
        path = path.map(function(value){
            return [CONSTANT.PICPRE.IMG,CONSTANT.PICPRE.TRYREPORT,value,CONSTANT.PICTUREOSS.W960].join('');
        });
        var name = 'showImg';
        var title = '查看图片';

        var params = {
            path: path,
            headerHeight:"75"
        };
        var from = {
            winName: api.winName,
            frameName: api.frameName
        };
        var url = 'showImg_new.html';
        openNewWin(name,title,params,from,url,{
            type:"fade",                //动画类型（详见动画类型常量）
            duration:300                //动画过渡时间，默认300毫秒
        });

    }
</script>
</html>